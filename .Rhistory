image.plot(lon,lat,s[1,1,,])
image.plot(lon,lat,s[1,2,,])
world(add=T)
image.plot(lon,lat,s[2,1,,])
world(add=T)
image.plot(lon,lat,s[2,2,,])
world(add=T)
title('try 2,2')
image.plot(lon,lat,s[2,2,,],zlim=c(.001,max(s[2,2,,])))
world(add=T)
s[s == 0] = NA
image.plot(lon,lat,s[2,2,,])
world(add=T)
v1 = apply(s[1,,,], 1, sum) > apply(s[2,,,], 1, sum)
plot(dateVec, -v1+2, typ='l', lwd = 2, col = 2, ylab = 'State')
str(v1)
v <- apply(s[1,,,], 1, sum)
v2 <- apply(s[2,,,], 1, sum)
v1 <- v > v2
head(v1)
v1
head(v)
head(v2)
str(s)
?apply
s = hmm.smoother(f, K1, K2, P, plot = F)
devtools::load_all("~/Documents/WHOI/RCode/hmmwoa")
s = hmm.smoother(f, K1, K2, P, plot = F)
install.packages('imager')
devtools::load_all("~/Documents/WHOI/RCode/hmmwoa")
install.packages('maptools')
devtools::load_all("~/Documents/WHOI/RCode/hmmwoa")
install.packages('locfit')
install.packages('ncdf')
library(ncdf)
install.packages('RNetCDF')
install.packages(rworldmap)
install.packages("~/Downloads/rworldmap_1.3-6.tar.gz", repos = NULL, type = "source")
devtools::load_all("~/Documents/WHOI/RCode/hmmwoa")
devtools::load_all("~/Documents/WHOI/RCode/hmmwoa")
s = hmm.smoother(f, K1, K2, P, plot = F)
v1 = apply(s[1,,,], 1, sum) > apply(s[2,,,], 1, sum)
plot(dateVec, -v1+2, typ='l', lwd = 2, col = 2, ylab = 'State')
head(v1)
-v1
sv=v1
sv <- -sv + 2
sv
P
image.plot(lon,lat,s[2,2,,])
image.plot(lon,lat,s[2,2,,],zlim=c(.0001,.04))
image.plot(lon,lat,s[2,2,,],zlim=c(.001,.03))
?world
P
image(P)
image.plot(P)
image(P, col=jet.colors(30))
p[1],1-p[1],1-p[2],p[2]
c(p[1],1-p[1],1-p[2],p[2])
p
?text
text(0,0,'1 to 1')
text(0,1,'1 to 2')
image(P, axes = F, col=jet.colors(30))
text(0,0,'1 to 1')
text(0,1,'1 to 2')
text(1,1,'2 to 2')
text(1,0,'2 to 1')
title('Transition Probability')
text(1,0,'2 to 1',col='white')
image.plot(lon,lat,s[2,2,,],zlim=c(.001,.03),ylim=c(35,50),xlim=c(-75,-60), xlab=NULL)
?image.plot
image.plot(lon,lat,s[2,2,,],zlim=c(.001,.03),ylim=c(35,50),xlim=c(-75,-60), xlab='')
print(par0)
par0ann <- c(D1=par0[1:2],D2=par0[3:4],P1=par0[5:6])
par0ann
?gausskern
P
?RNetCDF
devtools::load_all("~/Documents/WHOI/RCode/hmmwoa")
setwd('~/Documents/WHOI/Data/Blues/2015/141256/')
# READ IN TAG DATA
ptt <- '141256'
# TAG/POPUP DATES AND LOCATIONS (dd, mm, YYYY, lat, lon)
iniloc <- data.frame(matrix(c(13, 10, 2015, 41.575, -69.423,
24, 2, 2016, 26.6798, -69.0147), nrow = 2, ncol = 5, byrow = T))
colnames(iniloc) = list('day','month','year','lat','lon')
tag <- as.POSIXct(paste(iniloc[1,1], '/', iniloc[1,2], '/', iniloc[1,3], sep=''), format = '%d/%m/%Y', tz='UTC')
pop <- as.POSIXct(paste(iniloc[2,1], '/', iniloc[2,2], '/', iniloc[2,3], sep=''), format = '%d/%m/%Y', tz='UTC')
# VECTOR OF DATES FROM DATA. THIS WILL BE THE TIME STEPS, T, IN THE LIKELIHOODS
dateVec <- as.Date(seq(tag, pop, by = 'day'))
# READ IN DATA FROM WC FILES
myDir <- '~/Documents/WHOI/RCode/hmmwoa/inst/extdata/' # WHERE YOUR DATA LIVES, THIS IS THE EXAMPLE DATA
tag.sst <- read.wc(ptt, wd = myDir, type = 'sst', tag=tag, pop=pop);
sst.udates <- tag.sst$udates; tag.sst <- tag.sst$data
pdt <- read.wc(ptt, wd = myDir, type = 'pdt', tag=tag, pop=pop);
pdt.udates <- pdt$udates; pdt <- pdt$data
light <- read.wc(ptt, wd = myDir, type = 'light', tag=tag, pop=pop);
light.udates <- light$udates; light <- light$data
str(pdt)
pdt$DateOnly <- as.Date(as.POSIXct(pdt$Date, format = '%Y-%m-%d %H:%M:%S'))
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) #+
library(ggplot2)
install.packages('ggplot2')
library(ggplot2)
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) #+
pp2
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(300,0) + scale_x_date(labels=date_format('%b'), breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.border = element_blank(), panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
jet.colors <- colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan","#7FFF7F", "yellow", "#FF7F00", "red", "#7F0000"))
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(300,0) + scale_x_date(labels=date_format('%b'), breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.border = element_blank(), panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(300,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.border = element_blank(), panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1000,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.border = element_blank(), panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1000,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
iniloc
max(pdt$Depth)
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1700,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
which(pdt$Depth > 1000)
pdt[850:950,]
which(pdt$DateOnly == )
which(pdt$DateOnly == '2016-02-19')
max(which(pdt$DateOnly == '2016-02-19'))
pdt <- pdt[1:max(which(pdt$DateOnly == '2016-02-19')),]
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1700,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
pdt <- pdt[1:max(which(pdt$DateOnly == '2016-02-10')),]
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1700,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
pdt <- read.wc(ptt, wd = myDir, type = 'pdt', tag=tag, pop=pop);
pdt.udates <- pdt$udates; pdt <- pdt$data
pdt <- pdt[1:max(which(pdt$DateOnly == '2016-02-12')),]
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1700,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
unique(pdt$DateOnly)
pdt <- read.wc(ptt, wd = myDir, type = 'pdt', tag=tag, pop=pop);
pdt.udates <- pdt$udates; pdt <- pdt$data
pdt$DateOnly <- as.Date(as.POSIXct(pdt$Date, format = '%Y-%m-%d %H:%M:%S'))
unique(pdt$DateOnly)
pdt1 = pdt
pdt <- pdt1[1:max(which(pdt1$DateOnly == '2016-02-11')),]
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1700,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
pdt <- pdt1[1:max(which(pdt1$DateOnly == '2016-02-10')),]
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1700,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1000,0) + scale_x_date(breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
?scale_x_date
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1000,0) + scale_x_date(date_labels = "%b %d", breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(1000,0) + scale_x_date(date_labels = "%b", breaks = seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
seq(as.Date(min(pdt$DateOnly)),as.Date(max(pdt$DateOnly)),by='1 month')
as.Date(min(pdt$DateOnly),format='%b')
floor(pdt$DateOnly)
min(pdt$DateOnly)
max(pdt$Depth)
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(820,0) + scale_x_date(date_labels = "%b", breaks = seq(min(pdt$DateOnly), max(pdt$DateOnly), by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
?colorRampPalette
str(sst)
str(tag.sst)
tag.sst$DateOnly <- as.Date(as.POSIXct(tag.sst$Date, format = '%H:%M:%S %d-%b-%Y'))
tag.sst <- tag.sst1[1:max(which(tag.sst1$DateOnly == '2016-02-10')),]
tag.sst <- tag.sst[1:max(which(tag.sst$DateOnly == '2016-02-10')),]
str(tag.sst)
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() #+
psst
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(820,0) + #scale_x_date(date_labels = "%b", breaks = seq(min(pdt$DateOnly), max(pdt$DateOnly), by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
pp2
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
geom_point() +
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_point() +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
#geom_point() +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
str(light)
light$Day <- as.Date(as.POSIXct(light$Day, format = '%d-%b-%Y'))
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_point(data = light, aes(x = Day)) +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_point(data = light, aes(x = Day, y = 15)) +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_segment(data = light, aes(x = Day, y = 15)) +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
?geom_segment
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_line(data = light, aes(x = Day, y = 15)) +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_point(data = light, aes(x = Day, y = 15)) +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
str(light)
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_point(data = light, aes(x = Day, y = LL0)) +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
install.packages(gtable)
install.packages("~/Downloads/gtable_0.2.0.tar.gz", repos = NULL, type = "source")
install.packages(grid)
install.packages('grid')
install.packages('grid')
install.packages("grid")
install.packages("grid")
install.packages("grid")
library(grid)
library(gtable)
g1 <- ggplotGrob(psst)
library(ggplot2)
g1 <- ggplotGrob(psst)
g1 <- gtable_add_cols(g1, unit(0,"mm")) # add a column for missing legend
g2 <- ggplotGrob(plight)
plight <- ggplot(data = light, aes(x = Day, y = LL0)) +
geom_line() + xlab(NULL) + theme_bw() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
g2 <- ggplotGrob(plight)
g <- rbind(g1, g2, size="first") # stack the two plots
g1
g2
g <- rbind(g1, g2, size="first") # stack the two plots
ncol(g1)
ncol(g2)
?ggplotGrob
?grid.draw
g1
psst
plight
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
#geom_point(data = light, aes(x = Day, y = LL0)) +
xlab(NULL) + theme_bw() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
geom_point(data = light, aes(x = Day, y = LL0)) +
#scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
#scale_x_date(date_labels = "%b", breaks = seq(min(tag.sst$DateOnly), max(tag.sst$DateOnly), by='1 month')) +
#ylab('Depth (m)') +
xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
psst <- ggplot(tag.sst, aes(x = DateOnly, y = Temperature)) +
geom_line() +
#geom_point(data = light, aes(x = Day, y = LL0)) +
xlab(NULL) + theme_bw() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
psst
plight <- ggplot(data = light, aes(x = Day, y = LL0)) +
geom_line() + xlab(NULL) + theme_bw() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
plight
light <- light[1:max(which(light$Day == '2016-02-10')),]
unique(light$Day)
light <- light[1:max(which(light$Day == '2016-02-09')),]
plight <- ggplot(data = light, aes(x = Day, y = LL0)) +
geom_line() + xlab(NULL) + theme_bw() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), axis.line = element_line(colour = "black"))
plight
psst
pp2
cbind(c(1,1,2,3))
grid.arrange(pp2, psst, plight, ncol = 1,
layout_matrix = cbind(c(1,1,2,3))
)
install.packages('gridExtra')
library(gridExtra)
grid.arrange(pp2, psst, plight, ncol = 1,
layout_matrix = cbind(c(1,1,2,3)))
grid.arrange(pp2, psst, plight, ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)))
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(820,0) + #scale_x_date(date_labels = "%b", breaks = seq(min(pdt$DateOnly), max(pdt$DateOnly), by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.line = element_line(colour = "black"),
legend.position='top')
pp2
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(820,0) + #scale_x_date(date_labels = "%b", breaks = seq(min(pdt$DateOnly), max(pdt$DateOnly), by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.line = element_line(colour = "black"),
)
pp2
pp2 <- ggplot(pdt, aes(x = DateOnly, y = Depth, colour = MaxTemp)) +
geom_point(size=2) +
scale_colour_gradientn(name='Temp (C)',limits=c(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp))),breaks=seq(floor(min(pdt$MaxTemp)),ceiling(max(pdt$MaxTemp)),by=2),colours=jet.colors(20))+#rev(brewer.pal(10,"RdYlBu"))) +
ylim(820,0) + #scale_x_date(date_labels = "%b", breaks = seq(min(pdt$DateOnly), max(pdt$DateOnly), by='1 month')) +
ylab('Depth (m)') + xlab(NULL) +
theme_bw() + theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.line = element_line(colour = "black")
)
pp2
p4 <- plight + geom_blank()
p4 <- plight + geom_blank()
grid.arrange(pp2, psst, plight, p4,p4,ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)))
p4 <- ggplot(data = light, aes(x = Day, y = LL0)) + geom_blank()
grid.arrange(pp2, psst, plight, p4,p4,ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)))
grid.arrange(pp2, psst, plight, p4,p4,ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)),
widths = c(4,1))
grid.arrange(pp2, psst, plight, p4,p4,ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)),
widths = c(4,.8))
grid.arrange(pp2, psst, plight, p4,p4,ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)),
widths = c(4,.85))
grid.arrange(pp2, psst, plight, blankPlot, blankPlot, ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)),
widths = c(4,.85))
blankPlot <- ggplot()+geom_blank(aes(1,1))+
theme(
plot.background = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.line = element_blank()
)
grid.arrange(pp2, psst, plight, blankPlot, blankPlot, ncol = 2,
layout_matrix = cbind(c(1,1,2,3), c(1,1,4,5)),
widths = c(4,.85))
